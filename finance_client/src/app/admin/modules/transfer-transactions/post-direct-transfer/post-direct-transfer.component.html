<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Process direct transactions'" [items]="['Home', 'Direct transactions']"
        [active_item]="'Direct'">
      </app-breadcrumb>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
       
        <div class="card">
          <mat-progress-bar  *ngIf="activateLoader" mode="query" color="warn"></mat-progress-bar>
          <div class="header">
            <h2>Direct Transactions ({{ pageAction }})</h2>
          </div>
          <div class="body">
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                
                    <div class="alert alert-info" *ngIf="paymentTransaction">
                      <strong>NB:: PLEASE ENTER THESE DETAILS&nbsp;</strong> THEY
                      ARE CRITICAL FOR PAYMENT REPORT GENERATION
                      <a href="#" onClick="return false;" class="alert-link">&nbsp; ENSURE THEY ARE ACCURATELY CAPTURED</a>
                    </div>    

                <div class="header">
                  <h2>General Details</h2>
                </div>
                <form class="mx-4" [formGroup]="formData">
                  <div class="row">
                    <!-- <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <section class="example-section">
                        <span class="example-margin">Payment? </span>
                        <mat-radio-group formControlName="transTypeInfo" (change)="getHaveInvoice($event)">
                          <mat-radio-button class="example-margin" value="isPayment">Yes</mat-radio-button>
                          <mat-radio-button class="example-margin" value="isNotPayment">No
                          </mat-radio-button>
                        </mat-radio-group>
                      </section>
                    </div> -->
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>TranSubType</mat-label>
                        <mat-select formControlName="tranSubType">
                          <mat-option *ngFor="let item of partTrnSubTypeArray" [value]="item.name">{{ item.name }} - {{
                            item.desc }}
                          </mat-option>
                        </mat-select>
                        <mat-error *ngIf="
                            formData.get('tranSubType').hasError('required') &&
                            formData.get('tranSubType').touched
                          ">
                          Please enter Tran SubType</mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>RateCode</mat-label>
                        <input matInput formControlName="rateCode" />

                        <mat-icon matSuffix (click)="rateCodeLookup()">search</mat-icon>
                        <mat-error *ngIf="
                            formData.get('rateCode').hasError('required') &&
                            formData.get('rateCode').touched
                          ">
                          Please enter rate code</mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Currency</mat-label>
                        <input formControlName="currencyCode" matInput readonly />
                        <button (click)="currencyLookup()" mat-icon-button matSuffix
                          [attr.aria-label]="'Hide password'">
                          <mat-icon>search</mat-icon>
                        </button>
                        <mat-error *ngIf="
                            formData.get('currencyCode').hasError('required') &&
                            formData.get('currencyCode').touched
                          ">
                          Please enter currency!
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Transaction Description </mat-label>
                        <input formControlName="description" maxlength="50" matInput />

                        <mat-error *ngIf="
                            formData.get('description').hasError('required') &&
                            formData.get('description').touched
                          ">
                          Please enter Transaction Description!
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                  <div *ngIf="paymentTransaction">
                    <hr />
                   
                    <div class="header">
                      <h2>Payment Details</h2>
                    </div>
                    <div class="row">
                      <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                        <section class="example-section">
                          <span class="example-margin">Have a PO? </span>
                          <!-- <label class="example-margin">Have a PO:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> -->
                          <mat-radio-group formControlName="havePo" (change)="getHavePO($event)">
                            <mat-radio-button class="example-margin" disabled value="Yes">Yes</mat-radio-button>
                            <mat-radio-button class="example-margin" disabled value="No">No
                            </mat-radio-button>
                          </mat-radio-group>
                        </section>
                      </div>
                      <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Gross amount</mat-label>
                          <input matInput formControlName="grossAmount" mask="separator" thousandSeparator=","
                            (keyup)="getGrossAmt($event)" required />
                          <mat-icon matSuffix>attach_money</mat-icon>
                          <mat-error *ngIf="
                              formData
                                .get('grossAmount')
                                .hasError('required') &&
                              formData.get('grossAmount').touched
                            ">
                            Please enter gross amount
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Amount Vat Exclusive</mat-label>
                          <input matInput formControlName="amountExcTax" mask="separator" thousandSeparator=","
                            (keyup)="getNetAmt($event)" required />
                          <mat-icon matSuffix>attach_money</mat-icon>
                          <mat-error *ngIf="
                              formData
                                .get('amountExcTax')
                                .hasError('required') &&
                              formData.get('amountExcTax').touched
                            ">
                            Please enter net amount
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Vat rate used</mat-label>
                          <input matInput formControlName="vatRate" type="number" required
                            (keyup)="vatRateChange($event)" />

                          <mat-icon matSuffix>rate_review</mat-icon>
                          <mat-error *ngIf="
                              formData.get('vatRate').hasError('required') &&
                              formData.get('vatRate').touched
                            ">
                            Please enter vat rate
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>V.W.H rate used</mat-label>
                          <input matInput formControlName="vatWHRate" type="number" required
                            (keyup)="vatRateChange($event)" />

                          <mat-icon matSuffix>rate_review</mat-icon>
                          <mat-error *ngIf="
                              formData.get('vatWHRate').hasError('required') &&
                              formData.get('vatWHRate').touched
                            ">
                            Please enter vat WH rate
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>I.W.H rate used</mat-label>
                          <input matInput formControlName="incomeWHRate" type="number" required
                            (keyup)="vatRateChange($event)" />

                          <mat-icon matSuffix>rate_review</mat-icon>
                          <mat-error *ngIf="
                              formData
                                .get('incomeWHRate')
                                .hasError('required') &&
                              formData.get('incomeWHRate').touched
                            ">
                            Please enter income WH rate
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                        <section class="example-section">
                          <span class="example-margin">Prod type: </span>
                          <!-- <label class="example-margin">Prod type:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> -->
                          <mat-radio-group formControlName="producttype" (change)="getPayType($event)">
                            <mat-radio-button matTooltip="Local goods or services" class="example-margin"
                              value="Local">Loc
                            </mat-radio-button>
                            <mat-radio-button matTooltip="Imported goods or services" class="example-margin"
                              value="Import">
                              Imp
                            </mat-radio-button>
                          </mat-radio-group>
                        </section>
                        
                      </div>
                      <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Calculated Supplier amount</mat-label>
                          <input matInput formControlName="supplierAmount" mask="separator" thousandSeparator=","
                            required />

                          <mat-icon matSuffix>attach_money</mat-icon>
                          <mat-error *ngIf="
                              formData
                                .get('supplierAmount')
                                .hasError('required') &&
                              formData.get('supplierAmount').touched
                            ">
                            Please enter Supplier amount</mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Calculated Vat WH amount</mat-label>
                          <input matInput formControlName="vwhtAmount" mask="separator" thousandSeparator=","
                            required />

                          <mat-icon matSuffix>attach_money</mat-icon>
                          <mat-error *ngIf="
                              formData.get('vwhtAmount').hasError('required') &&
                              formData.get('vwhtAmount').touched
                            ">
                            Please enter Vat WH amount</mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Calculated Income WH amount</mat-label>
                          <input matInput formControlName="iwtAmount" mask="separator" thousandSeparator="," required />

                          <mat-icon matSuffix>attach_money</mat-icon>
                          <mat-error *ngIf="
                              formData.get('iwtAmount').hasError('required') &&
                              formData.get('iwtAmount').touched
                            ">
                            Please enter Income WH amount</mat-error>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                        <section class="example-section">
                          <span class="example-margin">Exp type? </span>
                          <!-- <label class="example-margin">Exp type:</label> -->
                          <mat-radio-group formControlName="expenseType" (change)="getExpenseType($event)">
                            <mat-radio-button class="example-margin" value="Goods">Gds</mat-radio-button>
                            <mat-radio-button class="example-margin" value="Services">Svs
                            </mat-radio-button>
                          </mat-radio-group>
                        </section>
                      </div>
                      <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Invoice amount</mat-label>
                          <input matInput formControlName="invoiceAmount" mask="separator" thousandSeparator=","
                            required />
                          <mat-icon matSuffix>attach_money</mat-icon>
                          <mat-error *ngIf="
                              formData
                                .get('invoiceAmount')
                                .hasError('required') &&
                              formData.get('invoiceAmount').touched
                            ">
                            Please enter invoice amount
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Invoice number</mat-label>
                          <input matInput formControlName="invoiceNo" />

                          <mat-icon matSuffix>find_in_page</mat-icon>
                          <mat-error *ngIf="
                              formData.get('invoiceNo').hasError('required') &&
                              formData.get('invoiceNo').touched
                            ">
                            Please enter invoice number
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 mb-2">
                        <mat-form-field class="example-full-width" appearance="fill">
                          <mat-label>Invoice Date</mat-label>
                          <input matInput [matDatepicker]="picker" formControlName="invoiceDate" />
                          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                          <mat-error *ngIf="
                              formData
                                .get('invoiceDate')
                                .hasError('required') &&
                              formData.get('invoiceDate').touched
                            ">
                            Please enter invoice date
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                        <section class="example-section">
                          <span class="example-margin">Invoice? </span>
                          <!-- <label class="example-margin">Have invoice?</label> -->
                          <mat-radio-group formControlName="haveInvoice" (change)="getHaveInvoice($event)">
                            <mat-radio-button class="example-margin" value="Yes">Yes</mat-radio-button>
                            <mat-radio-button class="example-margin" value="No">No
                            </mat-radio-button>
                          </mat-radio-group>
                        </section>
                      </div>
                      <div *ngIf="invoiceAvailable" class="col-xl-10 col-lg-10 col-md-12 col-sm-12 mb-2">
                        <div class="file-drop-area">
                          <button mat-raised-button color="primary">
                            Choose file
                          </button>
                          <span class="ms-2" *ngIf="selectedFiles.length == 0">{{ "or drag and drop file here" }}</span>
                          <span class="file-msg" *ngFor="let file of selectedFiles">
                            <div class="me-2">{{ file.name }}</div>
                          </span>
                          <input #file class="file-input" type="file" accept="application/pdf" multiple
                            (change)="onSelectFile(file.files)" />
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
                <hr />
                <!-- *ngIf="!supplierIsSelected" -->
               

                <div class="alert alert-warning" role="alert" *ngIf="!supplierIsSelected">
                    <span class="alert-icon">
                      <i class="fa fa-exclamation-circle"></i>
                    </span>
                    <span class="alert-message">
                      Kindly select a maintained supplier for payment trasactions!
                    </span>
                  </div>

                <div class="header">
                  <h2>Partrans Details</h2>
                </div>

                <!-- <div class="account-details">
                  <h2>{{ account.ACCT_NAME }}</h2>
                  <p>Freeze Flag: {{ account.ACCT_FREEZE_FLAG }}</p>
                  <p>Ownership Flag: {{ account.ACCT_OWNERSHIP_FLAG }}</p>
                  <p>Balance: {{ account.ACCT_BALANCE }} {{ account.ACCT_CURRENCY_CODE }}</p>
                  <p>Closure Flag: {{ account.ACCT_CLOSURE_FLAG }}</p>
                  <p>Status: {{ account.ACCT_STATUS }}</p>
                </div> -->

                <!-- <div class="account-details">
                 
                  <div class="details-row">
                    <p>Acc Name: {{ account.ACCT_NAME }}</p>
                    <p>Freeze Flag: {{ account.ACCT_FREEZE_FLAG }}</p>
                    <p>Ownership Flag: {{ account.ACCT_OWNERSHIP_FLAG }}</p>
                    <p>Balance: {{ account.ACCT_BALANCE }} {{ account.ACCT_CURRENCY_CODE }}</p>
                    <p>Closure Flag: {{ account.ACCT_CLOSURE_FLAG }}</p>
                    <p>Status: {{ account.ACCT_STATUS }}</p>
                  </div>
                </div> -->
                
                <!-- *ngIf="isAccountValid" -->
                <div class="spinner mb-3" *ngIf="activateLoader">
                  <img src="assets\images\gif.gif" alt="Loading..." />
                </div>
                
                <div class="account-info" *ngIf="!isAccountInfoLoading">
                  <ul class="list-unstyled user-progress list-unstyled-border list-unstyled-noborder"
                  style="position: relative; max-height: 335px;" [perfectScrollbar]>
                  <li class="lecture-list" *ngIf="isAccountValid">
                    <img alt="image" class="msr-3 rounded-circle" width="40" src="assets/images/em.jpg">
                    <div class="acc-item">
                      <div class="media-title font-16">Acc Name</div>
                      <div class="text-job text-muted mb-0">{{ selectedAcountNoInfo.ACCT_NAME }}</div>
                    </div>
                    <div class="acc-item">
                      <div class="media-title font-16">Ownership</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_OWNERSHIP_FLAG == 'C'" class="text-job text-muted mb-0">Customer</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_OWNERSHIP_FLAG == 'O'" class="text-job text-muted mb-0">Office</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_OWNERSHIP_FLAG == 'E'" class="text-job text-muted mb-0">Employee</div>
                    </div>
                    <div class="acc-item">
                      <div class="media-title font-16">Balance</div>
                      <div class="text-job text-muted mb-0">{{
                       selectedAcountNoInfo.ACCT_BALANCE 
                        | currency : selectedAcountNoInfo.ACCT_CURRENCY_CODE  : "symbol" : "1.2-2"
                        }}</div>
                      
                    </div>
                    <div class="acc-item">
                      <div class="media-title font-16">Closure</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_CLOSURE_FLAG == 'Y'" class="text-job text-muted mb-0">Closed</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_CLOSURE_FLAG == 'N'" class="text-job text-muted mb-0">Open</div>
                    </div>
                    <div class="acc-item">
                      <div class="media-title font-16">Status</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_STATUS == 'A'" class="text-job text-muted mb-0">Active</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_STATUS == 'D'" class="text-job text-muted mb-0">Dormant</div>
                    </div>
                    <div class="acc-item">
                      <div class="media-title font-16">Frozen</div>
                           
                      <div *ngIf="selectedAcountNoInfo.ACCT_FREEZE_FLAG != 'N'" class="text-job text-muted mb-0">Yes</div>
                      <div *ngIf="selectedAcountNoInfo.ACCT_FREEZE_FLAG == 'N'" class="text-job text-muted mb-0">No</div>
                     
                    </div>
                  </li>
                  

                  <!-- <div class="alert alert-danger" role="alert" *ngIf="!isAccountValid">
                    <span class="alert-icon">
                      <i class="fa fa-exclamation-circle"></i>
                    </span>
                    <span class="alert-message">
                      The details for the account you entered do not exist. Please use a different account!
                    </span>
                  </div>
                   -->
             
                  <!-- <div class="alert alert-warning" role="alert" *ngIf="finacleConnectionIssue">
                    <span class="alert-icon">
                      <i class="fa fa-exclamation-circle"></i>
                    </span>
                    <span class="alert-message">
                      Finacle connection timeout!
                    </span>
                  </div> -->
         
                 
                </ul>
                </div>
                
                
                <form class="mx-4" [formGroup]="transactionForm">
                  <div class="row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Select account type</mat-label>
                        <mat-select formControlName="typeOfAccount" (selectionChange)="getSelectedAccType($event)">
                          <mat-option *ngFor="let item of accountTypes" [value]="item.name">{{ item.name }}
                          </mat-option>
                        </mat-select>

                        <mat-icon matSuffix>done_all</mat-icon>
                        <mat-error *ngIf="
                            transactionForm
                              .get('typeOfAccount')
                              .hasError('required') &&
                            transactionForm.get('typeOfAccount').touched
                          ">
                          Please enter account type
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- <div *ngIf="supAccSelected" class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Supplier Name</mat-label>
                        <input formControlName="supplier" matInput readonly />
                        <button (click)="suppliersLookup()" mat-icon-button matSuffix
                          [attr.aria-label]="'Hide password'">
                          <mat-icon>search</mat-icon>
                        </button>
                        <mat-error *ngIf="
                            transactionForm
                              .get('supplier')
                              .hasError('required') &&
                            transactionForm.get('supplier').touched
                          ">
                          Please enter supplier name
                        </mat-error>
                      </mat-form-field>
                    </div> -->
                    <!-- <div *ngIf="taxAccSelected" class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Tax Name</mat-label>
                        <input formControlName="taxName" matInput readonly />
                        <button (click)="taxAccountsLookup()" mat-icon-button matSuffix
                          [attr.aria-label]="'Hide password'">
                          <mat-icon>search</mat-icon>
                        </button>
                        <mat-error *ngIf="
                            transactionForm
                              .get('taxName')
                              .hasError('required') &&
                            transactionForm.get('taxName').touched
                          ">
                          Please enter tax name
                        </mat-error>
                      </mat-form-field>
                    </div> -->
                    <!-- <div *ngIf="expAccSelected" class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Cost Center & Expense Name</mat-label>
                        <input matInput formControlName="costCenter" />

                        <mat-icon matSuffix (click)="expenseAccountLookup()">search</mat-icon>
                        <mat-error *ngIf="
                            transactionForm
                              .get('costCenter')
                              .hasError('required') &&
                            transactionForm.get('costCenter').touched
                          ">
                          Please enter costcenter & expense</mat-error>
                      </mat-form-field>
                    </div> -->
                    <!-- readonly -->
                    
                    <!-- <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label *ngIf="normalAccSelected">AccountName</mat-label>
                        <mat-label *ngIf="supAccSelected">Supplier/AccountName</mat-label>
                        <mat-label *ngIf="expAccSelected" >ExpenseName</mat-label>
                        <mat-label *ngIf="taxAccSelected">TaxAccountName</mat-label>
                        <input matInput formControlName="accountName" required readonly/>
                        <mat-icon *ngIf="supAccSelected" matSuffix (click)="suppliersLookup()">search</mat-icon>
                        <mat-icon *ngIf="expAccSelected"  matSuffix (click)="expenseAccountLookup()">search</mat-icon>
                        <mat-icon *ngIf="!showTaxLookUp" matSuffix (click)="branchCodeLookup()">search</mat-icon>
                        <mat-icon *ngIf="showTaxLookUp" matSuffix (click)="taxAccountsLookup()">search</mat-icon>

                        <mat-error *ngIf="
                            transactionForm
                              .get('accountName')
                              .hasError('required') &&
                            transactionForm.get('accountName').touched
                          ">
                          Please enter account Name</mat-error>
                      </mat-form-field>
                    </div> -->

                    
                    
                    
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2" style="display: flex; align-items: center;">
                      <mat-form-field class="example-full-width" appearance="fill" style="flex: 1;">
                        <mat-label *ngIf="normalAccSelected">AccountName</mat-label>
                        <mat-label *ngIf="supAccSelected">Supplier/AccountName</mat-label>
                        
                        <mat-label *ngIf="expAccSelected">ExpenseName</mat-label>
                        <mat-label *ngIf="taxAccSelected">TaxAccountName</mat-label>
                        <input matInput formControlName="accountName" required readonly style="width: calc(100% - 48px);">
                        <mat-icon *ngIf="supAccSelected" matSuffix (click)="suppliersLookup()" style="cursor: pointer;">search</mat-icon>
                        <mat-icon *ngIf="expAccSelected" matSuffix (click)="expenseAccountLookup()" style="cursor: pointer;">search</mat-icon>
                       
                        <mat-icon *ngIf="showTaxLookUp" matSuffix (click)="taxAccountsLookup()" style="cursor: pointer;">search</mat-icon>
                        <mat-error *ngIf="transactionForm.get('accountName').hasError('required') && transactionForm.get('accountName').touched">
                          Please enter account Name
                        </mat-error>
                      </mat-form-field>
                    </div>

                    
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>AccountNo</mat-label>
                        <input matInput formControlName="accountNo" required/>
                        <mat-icon *ngIf="!showTaxLookUp" matSuffix (click)="branchCodeLookup()" style="cursor: pointer;">search</mat-icon>
                        <mat-error *ngIf="
                            transactionForm
                              .get('accountNo')
                              .hasError('required') &&
                            transactionForm.get('accountNo').touched
                          ">
                          Please enter account No</mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <section class="example-section">
                        <label class="example-margin">Fetch Pointing Details?:&nbsp;&nbsp;&nbsp;</label>
                        <mat-radio-group formControlName="isPointing" (change)="getIsItPointing($event)">
                          <mat-radio-button class="example-margin" value="Yes">Yes</mat-radio-button>
                          <mat-radio-button class="example-margin" value="No">No
                          </mat-radio-button>
                        </mat-radio-group>
                      </section>
                    </div>
                    <div *ngIf="showPartitionInfo" class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Partition AccountNo</mat-label>
                        <input matInput formControlName="partitionAccount" />

                        <mat-icon matSuffix (click)="partitionAccountLookup()">search</mat-icon>
                        <mat-error *ngIf="
                            transactionForm
                              .get('partitionAccount')
                              .hasError('required') &&
                            transactionForm.get('partitionAccount').touched
                          ">
                          Please enter partition account No</mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Part Transaction Type </mat-label>
                        <mat-select formControlName="parttranstype" (selectionChange)="getSelectedTranType($event)">
                          <mat-option *ngFor="let item of partTransactionTypeArray" [value]="item">{{ item }}
                          </mat-option>
                        </mat-select>

                        <mat-error *ngIf="
                            transactionForm
                              .get('parttranstype')
                              .hasError('required') &&
                            transactionForm.get('parttranstype').touched
                          ">
                          Please enter Part Transaction Type!
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Transaction Amount</mat-label>

                        <!-- <input matInput type="number" formControlName="amount" required /> -->
                        <input matInput formControlName="amount" mask="separator" thousandSeparator="," required />
                        <mat-icon matSuffix>attach_money</mat-icon>
                        <mat-error *ngIf="
                            transactionForm
                              .get('amount')
                              .hasError('required') &&
                            transactionForm.get('amount').touched
                          ">
                          Please enter transaction amount!
                        </mat-error>
                        <mat-error *ngIf="
                            transactionForm.get('amount').hasError('pattern') &&
                            transactionForm.get('amount').touched
                          ">
                          Please ensure amount does not exceed 2 decimal values!
                        </mat-error>
                        <mat-error *ngIf="
                            transactionForm.get('amount').hasError('max') &&
                            transactionForm.get('amount').touched
                          ">
                          Please ensure amount does not exceed 1 billion!
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Currency</mat-label>
                        <input formControlName="accountCurrencyCode" matInput />
                        <button mat-icon-button matSuffix [attr.aria-label]="'Hide password'">
                          <mat-icon>search</mat-icon>
                        </button>
                        <mat-error *ngIf="
                            transactionForm
                              .get('accountCurrencyCode')
                              .hasError('required') &&
                            transactionForm.get('accountCurrencyCode').touched
                          ">
                          Please enter currency!
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <!-- (click)="currencyLookup()" -->
                    <!-- <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>TreasueryRefNum</mat-label>
                        <input matInput formControlName="treaRefNum" />

                       
                        <mat-error *ngIf="
                        transactionForm.get('treaRefNum').hasError('required') &&
                        transactionForm.get('treaRefNum').touched
                          ">
                          Please enter TreasueryRefNum</mat-error>
                      </mat-form-field>
                    </div> -->
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Exchange Rate </mat-label>
                        <input formControlName="exchangeRate" matInput />

                        <mat-error *ngIf="
                            transactionForm
                              .get('exchangeRate')
                              .hasError('required') &&
                            transactionForm.get('exchangeRate').touched
                          ">
                          Please enter exchange rate!
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Narration </mat-label>
                        <input formControlName="narration" maxlength="50" matInput />

                        <mat-error *ngIf="
                            transactionForm
                              .get('narration')
                              .hasError('required') &&
                            transactionForm.get('narration').touched
                          ">
                          Please enter Narration!
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  
                  <div class="row">
                    <div class="row m-t-10">
                      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2 float-left">
                        <div class="float-right">
                          <!--  -->
                          <button *ngIf="addButton" [disabled]="transactionForm.invalid || !accountIsValid" (click)="addToArray()" 
                            class="btn-space" mat-raised-button color="primary">
                            + Add transaction details
                          </button>
                          <!-- [disabled]="transactionForm.invalid" -->
                          <button *ngIf="editButton" [disabled]="transactionForm.invalid || !accountIsValid" class="btn-space"
                            (click)="updateTransactionDetails()" mat-raised-button color="primary">
                            + Update transaction details
                          </button>
                          <button type="button" (click)="clearForm()" mat-raised-button color="warn">
                            Clear
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>

                <div class="row" [hidden]="!hidePointingInfo">
                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                    <div class="table-responsive m-t-5">
                      <div class="body">
                        <div class="table-responsive">
                          <div class="materialTableHeader">
                            <div class="row">
                              <div class="col-8">
                                <ul class="header-buttons-left ms-0">
                                  <li class="dropdown">
                                    <h2>
                                      Pick details (Pointing account selected)
                                    </h2>
                                  </li>
                                  <li class="dropdown m-l-20">
                                    <label for="search-input">
                                      <i class="material-icons search-icon">search</i>
                                    </label>
                                    <input placeholder="Filter..." type="text" (keyup)="applyPointingFilter($event)"
                                      #filter class="browser-default search-field" aria-label="Search box" />
                                  </li>
                                  <!-- <li><div class="m-l-10" matTooltip="ADD"><button mat-mini-fab color="primary"><mat-icon class="col-white">add</mat-icon></button></div></li> -->
                                  <li>
                                    <div class="m-l-10" matTooltip="REFRESH">
                                      <button mat-mini-fab color="primary">
                                        <mat-icon class="col-white">refresh
                                        </mat-icon>
                                      </button>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                              <div class="col-4">
                                <ul class="header-buttons">
                                  <li>
                                    <div class="export-button m-l-10" matTooltip="XLSX">
                                      <img src="assets/images/icons/xlsx.png" alt="" (click)="
                                          exporter.exportTable('xlsx', {
                                            fileName: 'assets-list',
                                            sheet: 'sheet1'
                                          })
                                        " />
                                    </div>
                                  </li>
                                  <li>
                                    <div class="export-button m-l-10" matTooltip="CSV">
                                      <img src="assets/images/icons/csv.png" alt=""
                                        (click)="exporter.exportTable('csv')" />
                                    </div>
                                  </li>
                                  <li>
                                    <div class="export-button m-l-10" matTooltip="JSON">
                                      <img src="assets/images/icons/json.png" alt=""
                                        (click)="exporter.exportTable('json')" />
                                    </div>
                                  </li>
                                  <li>
                                    <div class="export-button m-l-10" matTooltip="TXT">
                                      <img src="assets/images/icons/txt.png" alt=""
                                        (click)="exporter.exportTable('txt')" />
                                    </div>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                          <mat-table #table matTableExporter [dataSource]="dataSourcePointing" matSort class="mat-cell"
                            #exporter="matTableExporter">
                            <!-- Checkbox Column -->
                            <ng-container matColumnDef="select">
                              <mat-header-cell *matHeaderCellDef [ngClass]="'tbl-col-width-per-3'">
                                <mat-checkbox (change)="
                                    $event ? masterTogglePicking() : null
                                  " [checked]="
                                    selectionPointing.hasValue() &&
                                    isAllSelectedPicking()
                                  " [indeterminate]="
                                    selectionPointing.hasValue() &&
                                    !isAllSelectedPicking()
                                  " [ngClass]="'tbl-checkbox'" (change)="getSelectedPickingInfo()"></mat-checkbox>
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" [ngClass]="'tbl-col-width-per-3'">
                                <mat-checkbox (click)="$event.stopPropagation()" (change)="
                                    $event
                                      ? selectionPointing.toggle(row)
                                      : null
                                  " [checked]="selectionPointing.isSelected(row)" [ngClass]="'tbl-checkbox'"
                                  [aria-label]="checkboxLabelPicking(row)" (change)="getSelectedPickingInfo()">
                                </mat-checkbox>
                              </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="acctCrncyCode">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-4">CCY
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-4">{{
                                row.acctCrncyCode }}</mat-cell>
                            </ng-container>
                            <!-- <ng-container matColumnDef="acctName">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-12"> acctName </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                                {{ row.acctName }}
                              </mat-cell>
                            </ng-container> -->

                            <!-- <ng-container matColumnDef="foracid">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-7"> acctNo </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-7">
                                {{ row.foracid }}
                              </mat-cell>
                            </ng-container> -->

                            <!-- <ng-container matColumnDef="numOffsetPtran">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-12"> numOffsetPtran </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                                {{ row.numOffsetPtran }}
                              </mat-cell>
                            </ng-container> -->

                            <!-- <ng-container matColumnDef="partTranSrlNum">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-12"> partTranSrlNum </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                                {{ row.partTranSrlNum }}
                              </mat-cell>
                            </ng-container> -->
                            <ng-container matColumnDef="partTranType">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-5">
                                PartTranType
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-5">
                                {{ row.partTranType }}
                              </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="solId">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-6">
                                SolId
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-6">
                                {{ row.solId }}
                              </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="tranDate">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-10">
                                TranDate
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-10">
                                {{ row.tranDate }}
                              </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="tranId">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-7">
                                TranId
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-7">
                                {{ row.tranId }}
                              </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="orgTranAmt">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-12">
                                TranAmt
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                                {{ row.orgTranAmt | number : "1.2-2" }}
                              </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="tranParticular">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-40">
                                TranParticular
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-40">
                                {{ row.tranParticular }}
                              </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="totalOffsetAmt">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-10">
                                Reversed Amt
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-10">
                                {{ row.totalOffsetAmt | number : "1.2-2" }}
                              </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="amt">
                              <mat-header-cell *matHeaderCellDef mat-sort-header
                                class="column-nowrap psl-3 tbl-col-width-per-10">
                                Reversing Amt
                              </mat-header-cell>
                              <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-10">
                                {{ row.amt | number : "1.2-2" }}
                              </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="action">
                              <mat-header-cell *matHeaderCellDef
                                class="psl-3 tbl-col-width-per-8">Action</mat-header-cell>
                              <mat-cell *matCellDef="let row; let i = index" class="psl-3 tbl-col-width-per-8"
                                (click)="updatePickingItemCall(row)">
                                <button mat-icon-button color="accent" (click)="$event.stopPropagation()"
                                  (click)="updatePickingItemCall(row)" class="tbl-action-btn">
                                  <app-feather-icons [icon]="'edit'" [class]="'tbl-fav-edit'"></app-feather-icons>
                                </button>
                              </mat-cell>
                            </ng-container>

                            <mat-header-row *matHeaderRowDef="displayedColumnsPointing"></mat-header-row>
                            <!-- <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row> -->
                            <mat-row *matRowDef="
                                let row;
                                columns: displayedColumnsPointing
                              " [style.cursor]="'pointer'" matRipple></mat-row>
                            <mat-cell *matNoDataRow colspan="4">
                              No data matching the filter "{{ input.value }}"
                            </mat-cell>
                          </mat-table>

                          <div *ngIf="noData">
                            <div class="mx-4 my-4">
                              <strong>
                                No pointing details found for the selected
                                account!</strong>
                            </div>
                          </div>

                          <!-- Loading spinner -->
                          <div *ngIf="isPontingLoading" class="tbl-spinner">
                            <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                            </mat-progress-spinner>
                          </div>
                          <!-- <mat-paginator [pageSize]="5" [pageSizeOptions]="[3, 5, 10, 20, 30, 40, 50, 100]"
                            [showFirstLastButtons]="true" [length]="dataSourcePointing?.data.length"
                            aria-label="Select page"></mat-paginator> -->
                          <!-- <mat-paginator #paginatorPointingDetails="matPaginator" [pageSize]="5"
                            [pageSizeOptions]="[3, 5, 10, 20, 30, 40, 50, 100]" aria-label="Select page">
                          </mat-paginator> -->
                          <mat-paginator [pageSize]="5" [pageSizeOptions]="[2, 5, 10, 20, 30, 40, 50, 100]"
                          aria-label="Select page of users"></mat-paginator>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="m-4">
                  <div class="row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                      <p><strong>Transaction details:</strong></p>
                    </div>
                    <div class="container">
                      <div class="row">
                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                          <div class="badge badge-solid-purple">
                            <!-- Total Credits: {{ this.credit_value }} -->
                            Total Credits: {{ credit_value | number : ".2" }}
                          </div>
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                          <div class="badge badge-solid-purple">
                            Total Debits: {{ this.debit_value | number : ".2" }}
                          </div>
                        </div>

                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                          <div *ngIf="Valid" class="badge badge-solid-blue">
                            Total Balance:
                            {{ this.total_value | number : ".2" }}
                          </div>
                          <div *ngIf="!Valid" class="badge badge-solid-red">
                            Total Balance:
                            {{ this.total_value | number : ".2" }}
                          </div>
                        </div>

                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 mb-2">
                          <span *ngIf="Valid" class="badge col-blue">Transaction is Balanced</span>
                          <span *ngIf="!Valid" class="badge col-red">Transaction is Imbalanced</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="mx-4">
                  <div class="materialTableHeader">
                    <div class="row">
                      <div class="col-8">
                        <ul class="header-buttons-left ms-0">
                          <li class="dropdown">
                            <h2>Transaction Records</h2>
                          </li>
                          <li class="dropdown m-l-20">
                            <label for="search-input"><i class="material-icons search-icon">search</i></label>
                            <input placeholder="Filter..." type="text" (keyup)="applyFilter($event)" #filter
                              class="browser-default search-field" aria-label="Search box" />
                          </li>

                          <li>
                            <div class="m-l-10" matTooltip="REFRESH">
                              <button mat-mini-fab color="primary">
                                <mat-icon class="col-white">refresh</mat-icon>
                              </button>
                            </div>
                          </li>
                        </ul>
                      </div>
                      <div class="col-4">
                        <ul class="header-buttons">
                          <li>
                            <div class="export-button m-l-10" matTooltip="XLSX">
                              <img src="assets/images/icons/xlsx.png" alt="" (click)="
                                  exporter.exportTable('xlsx', {
                                    fileName: 'assets-list',
                                    sheet: 'sheet1'
                                  })
                                " />
                            </div>
                          </li>
                          <li>
                            <div class="export-button m-l-10" matTooltip="CSV">
                              <img src="assets/images/icons/csv.png" alt="" (click)="exporter.exportTable('csv')" />
                            </div>
                          </li>
                          <li>
                            <div class="export-button m-l-10" matTooltip="JSON">
                              <img src="assets/images/icons/json.png" alt="" (click)="exporter.exportTable('json')" />
                            </div>
                          </li>
                          <li>
                            <div class="export-button m-l-10" matTooltip="TXT">
                              <img src="assets/images/icons/txt.png" alt="" (click)="exporter.exportTable('txt')" />
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <mat-table #table matTableExporter [dataSource]="dataSource" matSort class="mat-cell"
                    #exporter="matTableExporter">
                    <ng-container matColumnDef="index">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-4">#
                      </mat-header-cell>
                      <mat-cell *matCellDef="let element; let i = index" class="psl-3 tbl-col-width-per-4">{{ i + 1 }}
                      </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="typeOfAccount">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-12">
                        TypeOfAccount
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                        <span *ngIf="row.typeOfAccount">
                          {{ row.typeOfAccount }}</span>
                      </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="accountNo">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-12">Account
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                        <span *ngIf="row.accountNo"> {{ row.accountNo }}</span>
                      </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="parttranstype">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-20">Part
                        Transaction Type
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-20">
                        <span *ngIf="row.parttranstype">
                          {{ row.parttranstype }}</span>
                      </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="amount">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-20">Transaction
                        Amount
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-20">
                        <span *ngIf="row.amount">
                          {{
                          row.amount
                          | currency
                          : row.accountCurrencyCode
                          : "symbol"
                          : "1.2-2"
                          }}
                          <!-- {{ row.amount | currency : row.accountCurrencyCode }} -->
                        </span>
                      </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="accountCurrencyCode">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-15">CurrencyCode
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-15">
                        <span *ngIf="row.accountCurrencyCode">
                          {{ row.accountCurrencyCode }}</span>
                      </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="narration">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-30">Narration
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-30">
                        <span *ngIf="row.narration"> {{ row.narration }}</span>
                      </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="exchangeRate">
                      <mat-header-cell *matHeaderCellDef mat-sort-header class="psl-3 tbl-col-width-per-12">ExchangeRate
                      </mat-header-cell>
                      <mat-cell *matCellDef="let row" class="column-nowrap psl-3 tbl-col-width-per-12">
                        <span *ngIf="row.exchangeRate">
                          {{ row.exchangeRate }}</span>
                      </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="actions">
                      <mat-header-cell class="pr-0" *matHeaderCellDef>Actions</mat-header-cell>
                      <mat-cell *matCellDef="let row; let i = index" class="pr-0">
                        <button mat-icon-button color="accent" (click)="$event.stopPropagation()"
                          (click)="onEditTransactionDetails(row)" class="tbl-action-btn">
                          <app-feather-icons [icon]="'edit'" [class]="'tbl-fav-edit'"></app-feather-icons>
                        </button>
                        <button mat-icon-button color="accent" (click)="$event.stopPropagation()"
                          (click)="onTransactionDetail(i)" class="tbl-action-btn">
                          <app-feather-icons [icon]="'trash-2'" [class]="'tbl-fav-delete'"></app-feather-icons>
                        </button>
                      </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="
                        let row;
                        let i = index;
                        columns: displayedColumns
                      " (click)="onEditTransactionDetails(row)" [style.cursor]="'pointer'" matRipple>
                    </mat-row>

                    <!-- <mat-cell *matNoDataRow colspan="4">
                      No data matching the filter "{{ input.value }}"</mat-cell> -->
                  </mat-table>
                  <div *ngIf="isLoading" class="tbl-spinner">
                    <mat-progress-spinner color="primary" [diameter]="40" mode="indeterminate">
                    </mat-progress-spinner>
                  </div>
                  <!-- <mat-paginator [pageSize]="100" [pageSizeOptions]="[2, 6, 10, 20, 30, 40, 50, 100]"
                    aria-label="Select page of users"></mat-paginator> -->

                  <div class="row m-t-10">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                      <div class="example-button-row" align="end">
                        <button class="btn-space" [disabled]="!formData.valid" (click)="onSubmit()" mat-raised-button
                          color="primary">
                          {{ pageAction }} Transaction
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>